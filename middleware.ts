import type {NextRequest} from 'next/server'; import {NextResponse} from 'next/server'; export default function middleware(req: NextRequest){ const u=new URL(req.url); const p=u.pathname; if(!/^\/(ja|en)(\/|$)/.test(p) && /^(\/)(docs|pricing|product|cases|security|demo)(\/|$)/.test(p)){ u.pathname='/ja'+p; return NextResponse.redirect(u,308);} return NextResponse.next(); } export const config={matcher:['/((?!_next|favicon.ico|robots.txt|sitemap.xml|og.jpg|.*\..*).*)']};
